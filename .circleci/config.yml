# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/configuration-reference
version: 2.1 

parameters:
    temp:
        type: boolean
        default: true

# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/jobs-steps/#jobs-overview & https://circleci.com/docs/configuration-reference/#jobs
jobs:   
  sleep:
    docker:
      - image: cimg/base:current
    resource_class: small
    # Add steps to the job
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "sleep a while"
          command: "sleep 10"

  sleep_1:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
           
  sleep_2:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_3:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_4:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_5:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_6:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_7:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_8:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_9:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_10:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_11:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
           
  sleep_12:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_13:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_14:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_15:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_16:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_17:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_18:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_19:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_20:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_21:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
           
  sleep_22:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_23:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_24:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_25:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_26:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_27:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_28:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_29:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_30:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_31:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
           
  sleep_32:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
  sleep_33:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30

  sleep_34:
    docker:
      - image: cimg/base:current
    resource_class: small
    steps:
      # Checkout the code as the first step.
      - checkout
      - run:
          name: "Sleep for 3 hours"
          command: sleep 30
          
  cpu-stress-test:
    docker:
      - image: cimg/base:current
    steps:
      - checkout
      - run:
          name: "Install stress package (if needed)"
          command: |
            sudo apt-get update
            sudo apt-get install -y stress
      - run:
          name: "Run CPU stress test"
          command: |
            chmod +x cpu_stress.sh
            ./cpu_stress.sh


# Orchestrate jobs using workflows
# See: https://circleci.com/docs/workflows/ & https://circleci.com/docs/configuration-reference/#workflows
workflows:

  # say-hello-workflow: # This is the name of the workflow, feel free to change it to better match your workflow.
    # Inside the workflow, you define the jobs you want to run.
    # when:
      # equal: [<<pipeline.project.git_url>>, https://github.com/anonymoustest03/gatest1-03]
      # and:
      #      - equal: [<<pipeline.project.git_url>>, https://github.com/anonymoustest03/gatest1-03]
      #      - <<pipeline.parameters.nightly>>
    # jobs:
      # - sleep
      # - cpu-stress-test

  say-hello-workflow_24h: # This is the name of the workflow, feel free to change it to better match your workflow.
    # Inside the workflow, you define the jobs you want to run.
    # when:
    #         not:
    #              equal: [<<pipeline.project.git_url>>, https://github.com/anonymoustest03/gatest1-03]
    jobs:
      - sleep_1
      - sleep_2
      - sleep_3
      - sleep_4
      - sleep_5
      - sleep_6
      - sleep_7
      - sleep_8
      - sleep_9
      - sleep_10
      - sleep_11
      - sleep_12
      - sleep_13
      - sleep_14
      - sleep_15
      - sleep_16
      - sleep_17
      - sleep_18
      - sleep_19
      - sleep_20
      - sleep_21
      - sleep_22
      - sleep_23
      - sleep_24
      - sleep_25
      - sleep_26
      - sleep_27
      - sleep_28
      - sleep_29
      - sleep_30
      - sleep_31
      - sleep_32
      - sleep_33
      - sleep_34


# workflows:
#   say-hello-workflow:
#     jobs:
#       - sleep:
#           filters:
#             branches:
#               ignore: /.*/
#             pull_requests:
#               only:
#                 - /.*/
#       - cpu-stress-test:
#           filters:
#             branches:
#               ignore: /.*/
#             pull_requests:
#               only:
#                 - /.*/
